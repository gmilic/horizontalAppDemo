<template>
  <div>
    <svg id="linesvg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1869 1502" style="enable-background:new 0 0 868.63 2194.59;" xml:space="preserve">

        <path id="motionPath" class="st0" d="M155.395,383.31 C152.773,390.548 92.401,646.162 250.215,727.041 453.479,831.213 835.629,715.412 832.33,924.268 830.006,1071.385 20.339,1040.965 22.58,1206.204  " />
        <g id="motionSVG">
          <g id="tractor">
          
          
                <g>
        <g>
          <path d="M82.17.94c-32.08,0-58.08,10.83-58.08,33v88.7a8.49,8.49,0,0,0,8.49,8.49h99.17a8.49,8.49,0,0,0,8.49-8.49V33.94C140.24,11.77,114.24.94,82.17.94Z" style="fill: #e6e6e6"/>
          <path d="M131.75,132.07H32.58a9.44,9.44,0,0,1-9.43-9.43V33.94C23.15,13,45.76,0,82.17,0s59,13,59,33.94v88.7A9.44,9.44,0,0,1,131.75,132.07ZM82.17,1.88C54.55,1.88,25,10.3,25,33.94v88.7a7.56,7.56,0,0,0,7.55,7.55h99.17a7.56,7.56,0,0,0,7.55-7.55V33.94C139.3,10.3,109.79,1.88,82.17,1.88Z" style="fill: #becacc"/>
        </g>
        <path d="M82.17,10.3c23.23,0,45.48,4.84,57.56,18.41C136,9,111.68.94,82.17.94S28.3,9,24.6,28.71C36.59,15.14,58.93,10.3,82.17,10.3Z" style="fill: #4e5557"/>
        <path d="M82.17,36.52c-28,0-50.72,10.65-50.72,23.79V203.45c0,11.89,22.7,21.52,50.72,21.52s50.71-9.63,50.71-21.52V60.31C132.88,47.17,110.18,36.52,82.17,36.52Z" style="fill: #4e5557"/>
        <rect x="39.84" y="92.03" width="84.66" height="84.72" style="fill: #fff"/>
        <ellipse cx="82.17" cy="92.03" rx="42.33" ry="23.79" style="fill: #fff"/>
        <ellipse cx="82.17" cy="182.4" rx="42.33" ry="15.21" style="fill: #ccdf79"/>
        <g>
          <path d="M40.58,168.43l-9.13,28.95v.42a11.16,11.16,0,0,0,2.82,7l11-34.76Z" style="fill: #fff"/>
          <path d="M132.88,197.76l-9.25-29.33L119,170.08l11,34.86a11.24,11.24,0,0,0,2.91-7.14Z" style="fill: #fff"/>
          <path d="M45.23,90.11,32.52,49.79a11.92,11.92,0,0,0-1.07,4.87v8.15l9.13,29Z" style="fill: #fff"/>
          <path d="M123.63,91.77l9.25-29.34V54.66a11.89,11.89,0,0,0-1.14-5L119,90.11Z" style="fill: #fff"/>
          <rect x="31.45" y="125.92" width="101.44" height="5.21" style="fill: #fff"/>
        </g>
        <path d="M24.09,51.75,5.5,56.62c-4.45,1.47-6.56,4.71-5,7.68l.94,1.76,13.33-3.91,2.49-3.24,6.81-2.09Z" style="fill: #4e5557"/>
        <path d="M140.24,51.75l18.59,4.87c4.45,1.47,6.56,4.71,5,7.68l-.94,1.76-13.32-3.91-2.5-3.24-6.81-2.09Z" style="fill: #4e5557"/>
        <rect x="31.45" y="131.05" width="101.44" height="5.72" style="fill: #4e5557"/>
        <rect x="31.45" y="549.79" width="101.44" height="5.72" style="fill: #4e5557"/>
        <rect x="25.96" y="134.39" width="112.42" height="415.4" style="fill: #5cc0f2"/>
        <rect x="42.99" y="64.95" width="78.24" height="18.07" style="fill: #4e5557"/>
        <g>
          <path d="M52.07,6.18c-1.77.28-13,3.84-19.55,12.54a70.48,70.48,0,0,1,20.4-7.12C58.12,10.78,57.21,5.37,52.07,6.18Z" style="fill: #8cdbff"/>
          <path d="M112.26,6.18c1.77.28,13,3.84,19.55,12.54a70.48,70.48,0,0,0-20.4-7.12C106.21,10.78,107.12,5.37,112.26,6.18Z" style="fill: #8cdbff"/>
        </g>
        <g>
          <circle cx="82.17" cy="241.77" r="27.71" transform="translate(-172.76 226.92) rotate(-67.9)" style="fill: #8cdbff"/>
          <path d="M82.17,272.31a30.54,30.54,0,1,1,30.53-30.54A30.57,30.57,0,0,1,82.17,272.31Zm0-55.43a24.89,24.89,0,1,0,24.89,24.89A24.92,24.92,0,0,0,82.17,216.88Z" style="fill: #49aae7"/>
        </g>
        <g>
          <circle cx="82.17" cy="426.01" r="16.42" transform="translate(-96.34 30.57) rotate(-13.38)" style="fill: #8cdbff"/>
          <path d="M82.17,445.25A19.24,19.24,0,1,1,101.41,426,19.26,19.26,0,0,1,82.17,445.25Zm0-32.84A13.6,13.6,0,1,0,95.76,426,13.61,13.61,0,0,0,82.17,412.41Z" style="fill: #49aae7"/>
        </g>
        <circle cx="82.17" cy="241.77" r="16.42" transform="translate(-53.71 25.57) rotate(-13.38)" style="fill: #49aae7"/>
      </g>

          
          </g>
        </g>
    </svg>
  </div>
</template>

<script>

  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { MotionPathPlugin } from "gsap/MotionPathPlugin";




export default {
  name: "MovingTruck",
  mounted: function() {
    
    gsap.registerPlugin(MotionPathPlugin, ScrollTrigger);

    gsap.set("#motionSVG", { scale: 0.7, autoAlpha: 1 });
    gsap.set("#tractor", {transformOrigin: "50% 50%"});

    gsap.to("#motionSVG", {
      scrollTrigger: {
        trigger: "#motionPath",
        start: "top 20%",
        end: "bottom 20%",
        scrub: 1,
        //markers: true,
        onUpdate: self => {
          gsap.to("#tractor", {rotation: () => self.direction === 1 ? 0 : -180, overwrite: 'auto'});
        }
      },
      duration: 10,
      ease: "none",
      immediateRender: true,
      motionPath: {
        path: "#motionPath",
        align: "#motionPath",
        alignOrigin: [0.5, 0.5],
        autoRotate: 90,
      }
    });
  }
}
</script>

<style scoped>
  .st0 {
    fill:none;
    stroke:#c7c7c7;
    stroke-width:1;
    stroke-linecap:round;
    stroke-linejoin:round;
    stroke-miterlimit:10;
    }
</style>